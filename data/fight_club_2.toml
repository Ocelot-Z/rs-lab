# general config file for the project
version="0.0.3"

system="""
You are not an AI Model. You are a narrator of a turn-based role-play game.

GAME:
```
name: battle tower
theme: action
tonality: blood guts and gore
```

CHARACTER:
name: {{character.name}}
age: {{character.age}}
occupation: {{character.occupation}}

- Game is played in chapters. Each chapter has several turns.
- On each turn, you should carefully evaluate my CHARACTER's action to determine the narration. 

- Your should always follow the instructions what player whispers to you."

- There are 6 types of narrations: 
1. Basic narration:
```
narration: ...
```
2. Narration of CHOICES(ALWAYS 4 choices, without skill check):
```
narration: ...
choices: 
1. ...
2. ...
3. ...
```
3. Narration of SKILL_CHECK:
```
4. Narration of SANITY_CHECK:
```
narration: ...
skill_check: ... (spot_hidden,lock_picking, stealth, etc)
difficulty: ... (normal, hard or exteme)
sanity_check: ... (sanity)
```
5. If player enters a BATTLE, you should provide the enemy's name like this:
narration: ...
battle_with: ... (enemy_name)
6. Narration of chapter ENDING:
```
narration: ...
ending: ...
```
7. Narration of GAME OVER:
```
narration: ...
game_over: ...
```

- There are 3 types of extra information that you can provide to the player at the end of the turn: 
1. If a tag needs to be added, you should provide the tag name like this:
```
...
add_tag(or remove_tag): ... (tag name using snake_case)
```

2. If an item needs to be added or removed from player's inventory, you should ouput like this:
```
...
add_item(or remove_item): ... (item name using snake_case)
```

3. If the background image needs to be different from previous turn, you should ouput at the beginning:
```
...
background: ... (ONLY the image listed in the BACKGROUNDS)

```

- ONLY add/remove items or tags that are exactly required in the RULES.

- The narration should be as short as possible, if it's too long, player will lose interest.

current RULES:
{%- for rule in rules %}
- {{ rule }}
{%- endfor %}

BACKGROUNDS:
{%- for background in backgrounds %}
- {{ background }}
{%- endfor %}
"""

[[list.items]]
id="katana"
item_type="weapon"
description="A standard katana that has seen its fair shair of battles, its edge worn and tsuba scarred. Initiates 'katana skill check."
[list.items.stats]
attack="1d4"
requirement = "katana"

[[list.items]]
id="sawed_off_shotgun"
item_type="weapon"
description="A classic shotgun with great firepower and is able to shred up flesh. Holds 2 shells at once. Initiates 'shotgun' skill check."
[list.items.stats]
attack="1d20"

[[list.items]]
id="blazing_katana"
item_type="weapon"
description="Legend says that a phoenix is bound to this katana, and its blade will engulf in flames when drawn. Initiates 'katana' skill check."
[list.items.stats]
skills= "katana"
attack="1d6"

[[list.items]]
id="shotgun_shell"
item_type="consumable"
description="Ammunition for a shotgun."

[[list.items]]
id="war_hammer"
item_type="weapon"
description="A weapon capable of inflicting blunt force trauma and piercing damage. Although it is slow to use, it can pierce through thick armor. Initiates 'brawl' skill check."
[list.items.stats]
attack="(1d10)+2"


[[list.items]]
id="flash_bang"
item_type="consumable"
description="A grenade designed to emmit a bright flash instead of an explosion, best for stunning an enemy."

[[list.items]]
id="dragon_spear"
item_type="weapon"
description="A weapon that allows for great reach, great for keeping an enemy away from you. Initiates 'spear' skill check."
[list.items.stats]
attack="1d10"

[[list.items]]
id="grenade"
item_type="consumable"
description="A weapon that detonates after pulling the pin, be careful of its blast radius."

[[list.items]]
id="first_aid_kit"
item_type="consumable"
description="A standard first aid kit for dressing wounds and stop severe bleeding. Use it sparingly."

[[list.items]]
id="round_shield"
item_type="weapon"
description="A durable and light shield made of unknown alloy."

[[list.enemies]]
id="robot"
name="super bot"
description="A robot with laser weapons and chainsaw hands"
[list.enemies.stats]
hp=5
attack="1d6"

[[list.enemies]]
id="octopus"
name="Hacchi"
description="A humanoid octopus wielding 6 different type of swords."
[list.enemies.stats]
hp=12
attack="2d4"

[[list.enemies]]
id="lion"
name="Simba"
description="A humanoid lion with a muscular build and sharp metal claws."
[list.enemies.stats]
hp=10
attack="1d10"

[[list.enemies]]
id="kf_robot"
name="Pai Mei"
description="A powerful android programmed with incredible martial arts skill. Extremely deadly. Uses a spear and dao."
[list.enemies.stats]
hp=20
attack="2d10"

[[list.enemies]]
id="ape"
name="Harambe"
description="An ape that was once caged in a zoo. Once freed, it roamed the wilds and became the monstrosity it is today. Extremely vicious. Uses a battle axe."
[list.enemies.stats]
hp=30
attack="2d6"

[[list.enemies]]
id="demon"
name="Aku"
description="A shape shifting demon able to transform to any creature, living or mythical."
[list.enemies.stats]
hp=25
attack="3d6"



[character]
name="Jack"
age=28
occupation="samurai warrior"
backstory="""
You are Jack, a samurai warrior that has been transported into the future in the year 2678.
"""
items=["blazing_katana","sawed_off_shotgun", "shotgun_shell", "shotgun_shell"]

[character.stats]
hp=50
attack=5
sanity=30

[character.skills]
dodge=70
spot_hidden=70
katana= 80
brawl= 50
shotgun= 25
spear= 65



[[chapters]]
id="r1"
next="r2"
max_turns=10
backgrounds=[
    "ground_floor",
    "second_floor",
    "third_floor",
    "fourth_floor",
    "mystic_forest",
    "chilly_mountain",
]
rules=[
    "The ground floor is an open space with 'robot'.",
    "The 2nd floor is a maze.",
    

    "There are weapons and items throughout the floor.",
    "There is a key in the 2nd floor which the PLAYER must find to access the 3rd floor.",

    
    #"using the blazing_katana from items initiates 'katana' skill check.",
    "remove shotgun shell from items if weapon fired. (remove 'shotgun shell' from character items here.)",
    "Chapter ends when the player enters the second floor.",
    "When MAX_TURNS reached, and the player is not on the second floor, then it is GAME_OVER.",

    "Initiate SANITY CHECK when player is hit or injured",
]

initial="""
background: ground_floor
narration: 
{{character.backstory}}
You arrived at the battle tower after hearing rumors that the fourth floor has portals that could transport you back into your timeline. As you enter the building, a battle robot stands between you and the stairs to the next floor. The robot's eyes glow red and is ready to fight.
choices:
1. Fight the robot
2. Convince the robot to let you pass
3. Run
4. Look for additional equipment nearby
"""

[[chapters]]
id="r2"
next="r3"
max_turns=10
backgrounds=[
    "ground_floor",
    "second_floor",
    "third_floor",
    "fourth_floor",
    "mystic_forest",
    "chilly_mountain",
]
rules=[
    "The 2nd floor is a maze.",
    "There are no enemies in the maze.",
    

    "There are weapons and items throughout the floor.",
    "PLAYER must navigate through maze and its traps to enter the third floor.",
    "only items from the items list can be found.",
    
    "remove shotgun shell from items if weapon fired. (remove 'shotgun shell' from character items here.)",
    "Chapter ends when the player enters the third floor.",
    "When MAX_TURNS reached, and the player is not on the third floor, a nuke will drop onto the tower, then it is GAME_OVER.",
]

initial="""
background: second_floor
narration: 
You arrive at the second floor, and you immediately find yourself surrounded by walls except for 1 single hallway. As you tread deeper into the hallway, you realize it is a maze, and it seems the only way up is out of this maze.

choices:
1. Make a left
2. Make a right
3. Look for items
4. Examine the dragon spear on the ground
"""

[[chapters]]
id="r3"
next="r4"
max_turns=15
backgrounds=[
    "ground_floor",
    "second_floor",
    "third_floor",
    "fourth_floor",
    "mystic_forest",
    "chilly_mountain",
]
rules=[
    "The 3rd floor requires the PLAYER to fight 2 enemies at once. 'octopus' and 'lion'.",

    
    "remove shotgun shell from items if weapon fired. (remove 'shotgun shell' from character items here.)",
    "Chapter ends when the player enters the fourth floor.",
    "When MAX_TURNS reached, and the player is not on the fourth floor, then it is GAME_OVER.",

    "Player will only die from 3 hits or injury.",
    "Initiate SANITY CHECK when player is hit or injured",
]

initial="""
background: third_floor
narration: 
As you enter the 3rd floor, two strange creatures immediately lunge at you with swords and claws. Luckily, you managed to avoid them with your reflexes, but you may not be so lucky next time. It appears that you must defeat these two opponents before accessing the fourth floor.

choices:
1. Attack the octopus monster first
2. Attack the Lion monster first
3. Position yourself better in the room
4. Talk them out of fighting
"""

[[chapters]]
id="r4"
next="{%if 'red_portal' in tags%}r5a{%elif 'blue_portal' in tags%}r5b{%else%}r5c{%endif%}"
max_turns=5
backgrounds=[
    "ground_floor",
    "second_floor",
    "third_floor",
    "fourth_floor",
    "mystic_forest",
    "chilly_mountain",
]
rules=[
    "The battle tower has 4 floors.",
    "There are 2 portals on the 4th floor, a red one and a blue one.",
    "When PLAYER enters the red portal. (add a 'red_portal' tag here).",
    "When PLAYER enters the blue portal. (add a 'blue portal' tag here).",
    "1 portal goes to the mystic forest, the other goes to the chilly mountain.",

    "There are weapons and items throughout the floor.",
    "If the PLAYER wait and see what happens, then the portal will merge into 1 green portal",
    
    
    "remove shotgun shell from items if weapon fired. (remove 'shotgun shell' from character items here.)",
    "Chapter ends when the player enters the red portal, blue portal, or green portal.",
    "When MAX_TURNS reached, and the player has not entered a portal, the tower explodes, then it is GAME_OVER.",
]

initial="""
background: fourth_floor
narration: 
Before you are two portals, a red and blue one..

choices:
1. Enter the red portal
2. Enter the blue portal
3. wait and see what happens
"""

[[chapters]]
id="r5a"
next="WIN"
max_turns=10
backgrounds=[
    "ground_floor",
    "second_floor",
    "third_floor",
    "fourth_floor",
    "mystic_forest",
    "chilly_mountain",
    "ancient_temple",
]
rules=[
    "There are weapons and items throughout the floor.",
    "There is a 'kf_robot' wielding a spear and dao in the mystic forest. This is a boss battle.",
    
    
    "remove shotgun shell from items if weapon fired. (remove 'shotgun shell' from character items here.)",
    "Chapter ends when the player defeats 'kf_robot'.",
    "When MAX_TURNS reached, and the player did not defeat the robot kungfu master, then it is GAME_OVER.",
]

initial="""
background: mystic_forest
narration: 
You are now in a misty bamboo forest, and it is hard to make clear of your surroundings. You hear a mechanical sound from behind...

choices:
1. Counter
2. Defend
3. Dodge
4. Jump
"""

[[chapters]]
id="r5b"
next="WIN"
max_turns=10
backgrounds=[
    "ground_floor",
    "second_floor",
    "third_floor",
    "fourth_floor",
    "mystic_forest",
    "chilly_mountain",
]
rules=[
    "There are weapons and items throughout the floor.",
    " 'ape' is wielding a battle axe in the chilly mountain. This is a boss battle.",
    
    
    "remove shotgun shell from items if weapon fired. (remove 'shotgun shell' from character items here.)",
    "Chapter ends when the player defeats the 'ape'.",
    "When MAX_TURNS reached, and the player did not defeat the giant ape, then it is GAME_OVER.",
]

initial="""
background: chilly_mountain
narration: 
You find yourself engulf in cold wind, biting through your clothes and into your skin. Your breathe fogs up, and a shadow towers before you. The shadow reaches behind its back and pulls out a gigantic axe and howls ferociously at you. Its thunderous howl clears the wind, unveiling it to be a giant ape.

choices:
1. Charge in and attack
2. Create some distance
3. Wait for it to make its first move
4. Howl back
"""

[[chapters]]
id="r5c"
next="WIN"
max_turns=10
backgrounds=[
    "ancient_temple",
]
rules=[
    "There are weapons and items throughout the floor.",
    "There is a 'demon' with shape shifting ability in the ancient temple. This is a boss battle.",
    
    "remove shotgun shell from items if weapon fired. (remove 'shotgun shell' from character items here.)",
    "Chapter ends when the player defeats the 'demon'.",
    "When MAX_TURNS reached, and the player did not defeat the demon, then it is GAME_OVER.",
]

initial="""
background: ancient_temple
narration:
You are transported to an ancient temple, one that you recognize from your own time period, it was at this moment you realize you found your way back. But, before you could rejoice, a pool of black liquid begin to coalesce into a demon. It glared at you with a smirk, and trasnformed itself into a Chimera.

choices:
1. Take the initiative
2. Wait for it to make its first move
3. Create some distance
4. Focus
"""